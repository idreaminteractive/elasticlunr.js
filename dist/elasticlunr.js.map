{"version":3,"file":"elasticlunr.js","sources":["../lib/utils.js","../lib/index/interface.js","../lib/index/withPosition.js","../lib/dsl.js","../lib/index/converter.js","../lib/index.js","../lib/configuration.js","../lib/event_emitter.js","../lib/pipeline.js","../lib/document_store.js","../lib/sorted_set.js","../lib/tokenizer.js","../lib/stemmer.js","../lib/stop_word_filter.js","../lib/trimmer.js","../lib/elasticlunr.js"],"sourcesContent":["/* !\n * elasticlunr.utils\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\nexport default function (elasticlunr) {\n  /**\n   * A namespace containing utils for the rest of the elasticlunr library\n   */\n  elasticlunr.utils = {};\n\n  /**\n   * Print a warning message to the console.\n   *\n   * @param {String} message The message to be printed.\n   * @memberOf Utils\n   */\n  elasticlunr.utils.warn = (function (global) {\n    return function (message) {\n      if (global && global.console && global.console.warn) {\n        global.console.warn(message);\n      }\n    };\n  })(this);\n\n  /**\n   * Convert an object to string.\n   *\n   * In the case of `null` and `undefined` the function returns\n   * an empty string, in all other cases the result of calling\n   * `toString` on the passed object is returned.\n   *\n   * @param {object} obj The object to convert to a string.\n   * @return {String} string representation of the passed object.\n   * @memberOf Utils\n   */\n  elasticlunr.utils.toString = function (obj) {\n    if (obj === void 0 || obj === null) {\n      return '';\n    }\n\n    return obj.toString();\n  };\n};\n","class Index {\n\n  /** Individual elements */\n  getDocumentStore() {\n    throw Error('getDocumentStore() must be defined');\n  }\n\n  /** Index ops */\n  add(documents) {\n    throw Error('This index does not support adding documents');\n  }\n\n  remove(matcherFn) {\n    throw Error('This index does not support removal of documents');\n  }\n\n  all() {\n    return this.getDocumentStore().all();\n  }\n\n  getRef() {\n    throw Error('getRef must be implemented');\n  }\n\n  /** Terms/search */\n  getFields() {\n    throw Error('getFields() must be implemented');\n  }\n\n  getField(fieldName) {\n    throw Error('getField() must be implemented');\n  }\n\n  analyze(field, str) {\n    throw Error('The analyze(field, str) method must be implemented. This must return tokens for the given string.');\n  }\n\n  /** Query operators */\n  terms(query) {\n    throw Error('The terms(query) method must be implemented.');\n  }\n}\nexport default Index;\n","/**\n * elasticlunr.index.withPosition\n *\n * Copyright (C) Seb Renauld\n */\n\nimport IdxInterface from './interface.js';\n\nfunction levenshteinDistance(a, b) {\n  // Create empty edit distance matrix for all possible modifications of\n  // substrings of a to substrings of b.\n  const distanceMatrix = Array(b.length + 1).fill(null).map(() => Array(a.length + 1).fill(null));\n\n  // Fill the first row of the matrix.\n  // If this is first row then we're transforming empty string to a.\n  // In this case the number of transformations equals to size of a substring.\n  for (let i = 0; i <= a.length; i += 1) {\n    distanceMatrix[0][i] = i;\n  }\n\n  // Fill the first column of the matrix.\n  // If this is first column then we're transforming empty string to b.\n  // In this case the number of transformations equals to size of b substring.\n  for (let j = 0; j <= b.length; j += 1) {\n    distanceMatrix[j][0] = j;\n  }\n\n  for (let j = 1; j <= b.length; j += 1) {\n    for (let i = 1; i <= a.length; i += 1) {\n      const indicator = a[i - 1] === b[j - 1] ? 0 : 1;\n\n      distanceMatrix[j][i] = Math.min(\n        distanceMatrix[j][i - 1] + 1, // deletion\n        distanceMatrix[j - 1][i] + 1, // insertion\n        distanceMatrix[j - 1][i - 1] + indicator, // substitution\n      );\n    }\n  }\n\n  return distanceMatrix[b.length][a.length];\n}\n\nlet union = function (array1, array2) {\n  for (let o of array2) {\n    if (array1.indexOf(o) < 0) array1.push(o);\n  }\n  return array1;\n};\n\nclass Token {\n  constructor(token, metadata) {\n    this.token = token;\n    this.metadata = metadata || {};\n  }\n\n  update(fn) {\n    var out = fn(this.token, this.metadata);\n\n    if (Array.isArray(out) && out.length === 2) {\n      this.token = out[0];\n      this.metadata = {\n        ... this.metadata,\n        ...out[1]\n      };\n      return this;\n    }\n    this.token = out;\n    return this;\n  }\n  getPosition() {\n    if (this.metadata.start && this.metadata.end) return [this.metadata.start, this.metadata.end];\n    return null;\n  }\n\n  toString() {\n    return this.token;\n  }\n  term() {\n    return this.toString();\n  }\n}\n\nclass Field {\n\n  termFrequency(term) {\n    return this._tf[term];\n  }\n\n  hasToken(term) {\n    return this._idf[term] > 0;\n  }\n\n  allTokens() {\n    return Object.keys(this._terms).map((term) => {\n      return {\n        term: term,\n        tf: this._tf[term],\n        terms: this._terms[term],\n        idf: this._idf[term],\n        norm: this._flnorm,\n        documents: Object.keys(this._tf[term] || {})\n      };\n    });\n  }\n  getToken(term) {\n    if (!this._idf[term]) return null;\n    return {\n      term: term,\n      tf: this._tf[term],\n      idf: this._idf[term],\n      norm: this._flnorm,\n      documents: Object.keys(this._tf[term] || {})\n    };\n  }\n  setToken(term, documents) {\n    var docIdsChanged = [];\n\n    for (let [docId, options] of Object.entries(documents)) {\n      let tf = options.tf;\n      let ct = Math.pow(tf, 2);\n\n      if (ct < 1) {\n        // Token counts as deleted for this document\n        delete this._terms[term][docId];\n        delete this._tf[term][docId];\n        if (docIdsChanged.indexOf(docId) < 0) docIdsChanged.push(docId);\n        continue;\n      }\n      if (!this._terms[term]) this._terms[term] = {};\n      this._terms[term][docId] = {\n        positions: options.positions || [],\n        total: ct\n      };\n      if (!this._tf[term]) this._tf[term] = {};\n      this._tf[term][docId] = tf;\n      if (this._ids.indexOf(docId) < 0) this._ids.push(docId);\n    }\n    this.recalculateIDF();\n  }\n  highlight(id, highlightPositions) {\n    if (!this._documents[id]) throw Error(`Document not found: ${id}`);\n    let str = this._documents[id];\n    let sortedPositions = highlightPositions.sort((a, b) => a[0] - b[0]).reduce((current, pos) => {\n      if (!current.length) {\n        current.push(pos);\n        return current;\n      }\n      if (pos[0] > current[current.length - 1][0]) {\n        current.push(pos);\n        return current;\n      }\n      if (pos[1] > current[current.length - 1][0]) {\n        current[current.length - 1][1] = pos[1];\n      }\n      return current;\n    }, []).sort((a, b) => a[0] - b[0]);\n\n    return (startTag, endTag) => {\n      let components = [];\n\n      for (let i = 0; i < sortedPositions.length; i++) {\n        components.push(str.substring(i === 0 ? 0 : sortedPositions[i - 1][1], sortedPositions[i][0]));\n        components.push(startTag);\n        components.push(str.substring(sortedPositions[i][0], sortedPositions[i][1]));\n        components.push(endTag);\n      }\n      if (sortedPositions.length > 0) {\n        components.push(str.substring(sortedPositions[sortedPositions.length - 1][1]));\n      }\n      return components.join('');\n    };\n  }\n  terms(query) {\n    let matchingDocs = {};\n    let fuzz = query.fuzziness || 0;\n    let msm = query.minimum_should_match || 1;\n\n    query.terms.forEach((term) => {\n      if (term instanceof RegExp) {\n        let terms = Object.keys(this._terms);\n\n        terms.filter((idxTerm) => term.test(idxTerm)).map((matchedTerm) => {\n          let ids = Object.keys(this._terms[matchedTerm]);\n\n          (query.docs ? ids.filter((i) => query.docs.indexOf(i) >= 0) : ids).forEach((i) => {\n            if (!matchingDocs[i]) matchingDocs[i] = [];\n            matchingDocs[i].push({\n              ref: i,\n              positions: this._terms[matchedTerm][i].positions,\n              tf: this._tf[matchedTerm][i],\n              idf: this._idf[matchedTerm],\n              norm: this._flnorm,\n              content: this._store && this._documents[i] ? this._documents[i] : null\n            });\n          });\n        });\n      } else if (fuzz === 0 && this._terms[term]) {\n        let ids = Object.keys(this._terms[term]);\n\n        (query.docs ? ids.filter((i) => query.docs.indexOf(i) >= 0) : ids).forEach((i) => {\n          if (!matchingDocs[i]) matchingDocs[i] = [];\n          matchingDocs[i].push({\n            ref: i,\n            positions: this._terms[term][i].positions,\n            tf: this._tf[term][i],\n            idf: this._idf[term],\n            norm: this._flnorm,\n            content: this._store && this._documents[i] ? this._documents[i] : null\n          });\n        });\n      }\n      if (fuzz > 0) {\n        for (let o of Object.keys(this._terms)) {\n          if (levenshteinDistance(o, term) <= fuzz) {\n            let ids = Object.keys(this._terms[o]);\n\n            (query.docs ? ids.filter((i) => query.docs.indexOf(i) >= 0) : ids).forEach((i) => {\n              if (!matchingDocs[i]) matchingDocs[i] = [];\n              matchingDocs[i].push({\n                ref: i,\n                positions: this._terms[o][i].positions,\n                tf: this._tf[o][i],\n                idf: this._idf[o],\n                norm: this._flnorm,\n                content: this._store && this._documents[i] ? this._documents[i] : null\n              });\n            });\n          }\n        }\n      }\n    });\n    if (msm <= 1) return matchingDocs;\n    return Object.entries(matchingDocs).filter(([docId, content]) => {\n      return content.length >= query.minimum_should_match;\n    }).reduce((current, data) => {\n      current[data[0]] = data[1];\n      return current;\n    }, {});\n  }\n\n  constructor(options) {\n    if (options.pipeline) this.setPipeline(options.pipeline);\n    if (options.queryPipeline) this.setQueryPipeline(options.queryPipeline);\n    this.storePositions = options.storePositions || false;\n    this._terms = {}; // done\n    this._documents = {};\n    if (options.storeDocuments) {\n      this._store = true;\n    }\n    this._tf = {}; // done\n    this._idf = {}; // done\n    this._flnorm = 1; // done\n    this._ids = []; // done\n  }\n\n  toJSON() {\n    return {\n      pipeline: this.pipeline,\n      documents: this._documents,\n      store: {\n        positions: this.storePositions,\n        documents: this._store\n      }\n    };\n  }\n  all() {\n    return this._ids;\n  }\n\n  update(documents) {\n    var toRemove = documents.filter((doc) => this._ids.indexOf(doc.id) >= 0).map((doc) => doc.id);\n\n    return union(union([], this.remove(toRemove)), this.add(documents));\n  }\n\n  recalculateIDF() {\n    this._flnorm = 1 / Math.sqrt(Object.keys(this._terms).length);\n    // Quick calculation so we don't have to do it every time\n    Object.keys(this._terms).forEach((token) => {\n      this._idf[token] = 1 + Math.log10(this._ids.length / (Object.keys(this._terms[token]).length + 1));\n    });\n  }\n  add(documents) {\n    var updated = [];\n\n    for (let o of documents) {\n      if (this._ids.indexOf(o.id) >= 0) throw Error(`Document id ${o.id} already exists in the index`);\n      updated.push(o.id);\n      if (this._store) this._documents[o.id] = o.content;\n      this._ids.push(o.id);\n      let tokens = this.pipeline.run(o.content);\n\n      if (!Array.isArray(tokens)) tokens = [tokens];\n      tokens.forEach((token) => {\n        if (typeof token === 'string') {\n          token = new Token(token);\n        }\n        let term = token.toString();\n\n        if (!this._terms[term]) this._terms[term] = {};\n        if (!this._terms[term][o.id]) {\n          this._terms[term][o.id] = {\n            positions: [],\n            total: 0\n          };\n        }\n        if (token instanceof Token) {\n          let position = token.getPosition();\n\n          if (position) this._terms[term][o.id].positions.push(position);\n        }\n        this._terms[term][o.id].total++;\n        if (!this._tf[term]) this._tf[term] = {};\n        this._tf[term][o.id] = Math.sqrt(this._terms[term][o.id].total);\n      });\n    }\n    this.recalculateIDF();\n    return updated;\n  }\n\n  remove(ids) {\n    let updated = [];\n\n    ids.forEach((id) => {\n      if (this._documents[id]) {\n        updated.push(id);\n      }\n      delete this._documents[id];\n      let inIdPos = this._ids.indexOf(id);\n\n      if (inIdPos >= 0) this._ids.splice(inIdPos, 1);\n      for (let o of Object.keys(this._terms)) {\n        if (this._terms[o][id]) {\n          delete this._terms[o][id];\n          delete this._tf[o][id];\n          if (Object.keys(this._terms[o]).length === 0) {\n            delete this._terms[o];\n            delete this._tf[o];\n            delete this._idf[o];\n          }\n        }\n      }\n    });\n    this.recalculateIDF();\n    return updated;\n  }\n\n  setPipeline(pipeline) {\n    this.pipeline = pipeline;\n  }\n  setQueryPipeline(pipeline) {\n    this.queryPipeline = pipeline;\n  }\n\n  analyze(str, options) {\n    if (options && options.isQuery && this.queryPipeline) return this.queryPipeline.run(str);\n    return this.pipeline.run(str);\n  }\n}\n\nclass DocumentStore {\n\n  constructor(idx) {\n    this.inner = idx;\n    this.length = 0;\n  }\n\n  size() {\n    return this.length;\n  }\n\n  updateLength() {\n    this.length = this.inner.getFields().map((field) => {\n\n      var o = this.inner.getField(field)._ids.length;\n\n      return o;\n    }).reduce((prev, d) => d > prev ? d : prev, 0);\n  }\n}\n\nclass Index extends IdxInterface {\n\n  constructor(options) {\n    super(options);\n    this._fields = options.fields || {};\n    this._ref = options._ref || 'id';\n    this.emitter = options.emitter;\n    this.storePositions = options.storePositions || false;\n    this.storeDocuments = options.storeDocuments || false;\n    this._fields[this._ref] = new Field({\n      pipeline: {\n        run: function (str) { return [str]; }\n      }\n    });\n    this.documentStore = new DocumentStore(this);\n    this.pipeline = options.pipeline;\n  }\n  highlight(id, data) {\n    // Pre-compute stuff\n    let preComputed = Object.entries(data)\n      .filter(([field, positions]) => !!this._fields[field])\n      .map(([field, positions]) => {\n        return [field, this._fields[field].highlight(id, positions)];\n      });\n\n    return function (startTag, endTag) {\n      let obj = {};\n\n      preComputed.forEach(([field, fn]) => {\n        obj[field] = fn(startTag, endTag);\n      });\n      return obj;\n    };\n  }\n\n  _load(idxData) {\n    var fieldMap = [];\n    // Create the fields\n\n    idxData.fields.forEach((field) => {\n      fieldMap.push(field.name);\n      this.addField(\n        field.name,\n        field.settings || {}\n      );\n\n      if (field.settings && field.settings.store && field.settings.store.documents) {\n        this.getField(field.name)._documents = field.settings.documents;\n      }\n    });\n    Object.entries(idxData.index).forEach(([term, occurences]) => {\n      occurences.forEach((record) => {\n        var field = fieldMap[record[0]];\n        var reconstructed = {};\n\n        Object.entries(record[1].tf).forEach(([docID, tf]) => {\n          if (!reconstructed[docID]) reconstructed[docID] = {};\n          reconstructed[docID].tf = tf;\n        });\n        Object.entries(record[1].p).forEach(([docID, info]) => {\n          if (!reconstructed[docID]) reconstructed[docID] = {};\n          if (info.positions) reconstructed[docID].positions = info.positions;\n        });\n        this.getField(field).setToken(term, reconstructed);\n      });\n    });\n  }\n  _legacyLoad(idxData) {\n    // The \"save\" flag that we use as storeDocuments is in an awkward place\n    let saveDocs = idxData.documentStore.save || false;\n\n    // Pipeline? Set it in the idx\n    if (idxData && idxData.pipeline) {\n      this.pipeline = idxData.pipeline;\n    }\n    // First, we create the fields\n    idxData.fields.forEach((field) => {\n      this.addField(field.name, {\n        storeDocuments: saveDocs\n      });\n    });\n\n    if (idxData.ref !== 'id') {\n      this.newRef(idxData.ref);\n    }\n\n    // From here, we reimport the TF/IDF for all terms\n    let recurseTerm = (field, rootTerm, settings) => {\n      const branches = Object.keys(settings);\n\n      for (const o of branches) {\n        if (o === 'df') continue;\n        if (o === 'docs') {\n          for (const [, records] of Object.entries(settings[o])) {\n            field.setToken(rootTerm, {\n              tf: records.tf\n            });\n          }\n          continue;\n        }\n        recurseTerm(field, rootTerm + o, settings[o]);\n      }\n    };\n\n    for (const [field, entries] of Object.entries(idxData.index)) {\n      if (!entries.root) continue;\n      recurseTerm(this._fields[field], '', entries.root);\n    }\n\n  }\n\n  getFields() {\n    return Object.keys(this._fields);\n  }\n\n  toJSON() {\n    var fieldRef = [];\n    var idxJson = {};\n\n    Object.entries(this._fields).forEach(([fieldName, field]) => {\n      fieldRef.push({\n        name: fieldName,\n        settings: field.toJSON()\n      });\n      let fieldID = fieldRef.length - 1;\n\n      field.allTokens().forEach((term) => {\n        if (!idxJson[term.term]) idxJson[term.term] = [];\n        idxJson[term.term].push([fieldID, {tf: term.tf, idf: term.idf, p: term.terms}]);\n      });\n    });\n\n    return {\n      fields: fieldRef,\n      ref: this._ref,\n      index: idxJson,\n      pipeline: this.pipeline.toJSON(),\n      version: '1.0.0'\n    };\n  }\n\n  getRef() {\n    return this._ref;\n  }\n\n  update(documents, muteEvent) {\n    var updatedIds = [];\n    // Break down in chunks\n\n    documents.forEach((doc) => {\n      // Get keys\n      var id = doc[this._ref];\n\n      Object.entries(doc).forEach(([key, content]) => {\n        if (this._fields[key]) {\n          updatedIds = union(updatedIds, this._fields[key].update([{\n            id: id,\n            content: content\n          }]));\n        }\n      });\n    });\n    if (this.emitter && muteEvent !== false) {\n      documents.filter((doc) => updatedIds.indexOf(doc[this._ref]) >= 0)\n        .map((doc) => this.emitter.emit('update', doc, this));\n    }\n    this.documentStore.updateLength();\n    return true;\n  }\n  add(documents, muteEvent) {\n    var updatedIds = [];\n    // Break down in chunks\n\n    documents.forEach((doc) => {\n      // Get keys\n      var id = doc[this._ref];\n\n      Object.entries(doc).forEach(([key, content]) => {\n        if (this._fields[key]) {\n          updatedIds = union(updatedIds, this._fields[key].add([{\n            id: id,\n            content: content\n          }]));\n        }\n      });\n    });\n    if (this.emitter && muteEvent !== false) {\n      documents\n        .filter((doc) => updatedIds.indexOf(doc[this._ref]) >= 0)\n        .map((doc) => this.emitter.emit('add', doc, this));\n    }\n    this.documentStore.updateLength();\n    return true;\n  }\n\n  reindex() {\n    /* return this.fields().then((field) => {\n            let fObj = this.getField(field);\n            fObj.add(Object.values(fObj._documents))\n        }); */\n  }\n\n  remove(docIDs, muteEvent) {\n    var updatedIds = Object.values(this._fields)\n      .reduce((updatedIds, field) => union(updatedIds, field.remove(docIDs)), []);\n\n    if (this.emitter && muteEvent !== false) {\n      updatedIds.forEach((doc) => this.emitter.emit('remove', doc, this));\n    }\n    this.documentStore.updateLength();\n    return true;\n  }\n\n  addField(field, options) {\n    var fieldOptions = {};\n\n    options = options || {};\n    fieldOptions.pipeline = options.pipeline || this.pipeline;\n    fieldOptions.storeDocuments = options.storeDocuments || this.storeDocuments;\n    fieldOptions.storePositions = true;\n    this._fields[field] = new Field(fieldOptions);\n    return this;\n  }\n\n  getField(field) {\n    return this._fields[field];\n  }\n\n  removeField(field) {\n    delete this._fields[field];\n  }\n\n  setRef(field) {\n    if (!this._fields[field]) {\n      throw Error(`Unknown field ${field}`);\n    }\n    this._ref = field;\n    return this.reindex();\n  }\n  newRef(field) {\n    this.removeField(this._ref);\n    this._fields[field] = new Field({\n      pipeline: {\n        run: function (str) { return [str]; }\n      }\n    });\n    this.setRef(field);\n  }\n\n  all() {\n    return this._fields[this._ref].all();\n  }\n\n  analyze(field, str, options) {\n    return this._fields[field].analyze(str, options);\n  }\n\n  terms(query) {\n    return this._fields[query.field].terms(query);\n  }\n}\n\nexport { Index, Field, Token };\n/* export default function(elasticlunr) {\n    elasticlunr.index.register('1.0.0', function(config) {\n        return new Idx(elasticlunr);\n    });\n}; */\n","class Repository {\n  constructor(queries) {\n    this.queries = queries || {};\n  }\n\n  parse(element, options, queryOptions) {\n    if (!this.queries[element]) throw Error(`Unknown query type ${element}`);\n    return this.queries[element](this, options, queryOptions);\n  }\n\n  register(element, parser) {\n    this.queries[element] = parser;\n  }\n}\n\nlet QueryRepository = new Repository();\n\nclass Query {\n  filter(index, options) {\n    var results = this.score(index, options);\n\n    return results.filter(({ id, score }) => score > 0);\n  }\n  score(index, options) {\n    throw Error('Please extend the score() method');\n  }\n  // Basic query\n  rewrite(index) {\n    return this;\n  }\n}\n\nclass NotQuery extends Query {\n\n  constructor(innerQuery) {\n    super(innerQuery);\n    this.inner = innerQuery;\n  }\n\n  score(index, options) {\n    var queryAll = index.all(options), queryScore = this.inner.score(index, options);\n    var matchedIDS = queryScore.map((doc) => doc.ref);\n\n    return queryAll.filter((id) => matchedIDS.indexOf(id) < 0).map((id) => {\n      return {\n        ref: id,\n        score: 1\n      };\n    });\n  }\n}\n\nQueryRepository.register('not', (repo, options, queryOptions) => {\n  var keys = Object.keys(options);\n\n  if (!keys || !keys[0]) throw Error('A not query must have a query type as root element');\n  return new NotQuery(QueryRepository.parse(keys[0], options[keys[0]], options));\n});\n\nclass BoolQuery extends Query {\n\n  constructor(options) {\n    super(options);\n    this.should = options.should || [];\n    this.must = options.must || false;\n    this.must_not = options.must_not || false;\n    this.filter = options.filter;\n    this.minimum_should_match = options.minimum_should_match || 1;\n  }\n\n  rewrite(idx) {\n    var filters = this.filter || [];\n\n    var q = new BoolQuery({\n      should: (this.should || []).map((q) => q.rewrite(idx)),\n      must: this.must ? this.must.rewrite(idx) : false,\n      minimum_should_match: this.minimum_should_match\n    });\n\n    if (this.must_not) {\n      filters.push(new NotQuery(this.must_not.rewrite(idx)));\n    }\n    if (filters && filters.length) {\n      q.filter = filters.map((r) => r.rewrite(idx));\n    }\n    return q;\n  }\n  score(index, options, isRewritten) {\n\n    if (!isRewritten) {\n      return this.rewrite(index).score(index, options, true);\n    }\n\n    // Run filter context and must/must not if any\n    let filter_results = false;\n\n    if (this.filter && this.filter.length) {\n      filter_results = this.filter.reduce((currentDocSet, query) => {\n        let q = currentDocSet !== false ? {\n          filtered: currentDocSet.map((doc) => doc.ref)\n        } : {};\n\n        return query.filter(index, q);\n      }, filter_results);\n    }\n\n    let docs = {};\n\n    if (this.must) {\n      // This score counts\n      let q = filter_results !== false ? {\n        filtered: filter_results.map((doc) => doc.ref)\n      } : {};\n\n      filter_results = this.must.score(index, q);\n    }\n    let filterQuery = {};\n\n    if (filter_results !== false) {\n      filterQuery.filtered = [];\n      filter_results.forEach((doc) => {\n        filterQuery.filtered.push(doc.ref);\n        docs[doc.ref] = {\n          ref: doc.ref,\n          positions: [],\n          score: doc.score || 0,\n          matched: 0\n        };\n      });\n    }\n    this.should.reduce(\n      (fq, query) => {\n        let results = query.score(index, fq);\n\n        results.forEach((doc) => {\n          if (!docs[doc.ref]) {\n            docs[doc.ref] = {\n              ref: doc.ref,\n              positions: {},\n              score: 0,\n              matched: 0\n            };\n          }\n          Object.entries(doc.positions).forEach(([field, tokens]) => {\n            if (!docs[doc.ref].positions[field]) docs[doc.ref].positions[field] = [];\n            tokens.forEach((t) => docs[doc.ref].positions[field].push(t));\n          });\n          docs[doc.ref].score += doc.score;\n          docs[doc.ref].matched++;\n        });\n        return fq;\n      }, filterQuery);\n    return Object.entries(docs).map((o) => o[1]).filter((doc) => {\n      return doc.matched >= this.minimum_should_match && doc.score > 0;\n    });\n  }\n}\nQueryRepository.register('bool', (repo, options, queryOptions) => {\n  var opts = {};\n\n  if (options.should) {\n    opts.should = options.should.map((query) => {\n      var k = Object.keys(query);\n\n      if (!k || !k[0]) return repo.parse('match_all', {});\n      return repo.parse(k[0], query[k[0]], query);\n    });\n  }\n  if (options.filter) {\n    opts.filter = options.filter.map((query) => {\n      var k = Object.keys(query);\n\n      if (!k || !k[0]) return repo.parse('match_all', {});\n      return repo.parse(k[0], query[k[0]], query);\n    });\n  }\n  if (options.must) {\n    let must_k = Object.keys(options.must);\n\n    if (must_k && must_k[0]) opts.must = repo.parse(must_k[0], options.must[must_k[0]], options.must);\n  }\n  if (options.must_not) {\n    let must_not_k = Object.keys(options.must_not);\n\n    if (must_not_k && must_not_k[0]) {\n      opts.must_not = repo.parse(\n        must_not_k[0],\n        options.must_not[must_not_k[0]],\n        options.must_not\n      );\n    }\n  }\n  if (options.minimum_should_match && options.minimum_should_match <= opts.should.length) {\n    opts.minimum_should_match = options.minimum_should_match;\n  }\n  return new BoolQuery(opts);\n});\n// let QueryCache = {};\n\nclass TermsQuery extends Query {\n\n  constructor(options) {\n    super(options);\n    this.minimum_should_match = options.minimum_should_match || 1;\n    this.expand = !!options.expand;\n    this.field = options.field || '';\n    this.terms = options.terms || [];\n    this.boost = options.boost || 1;\n    this.fuzziness = options.fuzziness || 0;\n\n    if (!Array.isArray(this.terms)) this.terms = [this.terms];\n  }\n\n  score(index, options) {\n    if (!options) options = {};\n    let query = {\n      field: this.field,\n      terms: this.expand ? this.terms.map((term) => new RegExp('^' + term + '.*')) : this.terms,\n      fuzziness: this.fuzziness,\n      minimum_should_match: this.minimum_should_match\n    };\n\n    if (options.filtered) {\n      query.docs = (options || {}).filtered;\n    }\n    let docs = index.terms(query);\n    let ids = Object.keys(docs);\n    let matched = [];\n\n    for (let i of ids) {\n      let pickedScore = docs[i].map((t) => {\n        return [t.tf * Math.pow(t.idf, 2) * t.norm, t];\n      }).reduce((i, t) => t[0] > i[0] ? t : i, [0, undefined]);\n\n      matched.push({\n        ref: i,\n        field: this.field,\n        positions: {\n          [this.field]: pickedScore[1].positions\n        },\n        score: pickedScore[0] * this.boost\n      });\n    }\n    return matched;\n  }\n}\nclass MatchAllQuery extends Query {\n\n  constructor(options) {\n    super(options);\n    this.boost = options.boost || 1;\n  }\n\n  score(index, options) {\n    var docIds = index.all();\n\n    return docIds.map((docId) => {\n      return {\n        ref: docId,\n        score: this.boost\n      };\n    });\n  }\n}\nclass MatchQuery extends Query {\n\n  constructor(options) {\n    super(options);\n    this.expand = !!options.expand;\n    this.field = options.field || '';\n    this.query = options.query || '';\n    this.boost = options.boost || 1;\n    this.fuzziness = options.fuzziness || 0;\n    this.minMatch = options.minimum_must_match !== undefined ? options.minimum_must_match : 1;\n    this.operator = options.operator === 'and' ? 'and' : 'or';\n  }\n\n  score(index, options) {\n    // Rewrite\n    return this.rewrite(index).score(index, options);\n  }\n\n  rewrite(index) {\n    let tokens = index.analyze(this.field, this.query, {\n      isQuery: true\n    });\n\n    if (!Array.isArray(tokens)) tokens = [tokens];\n    let q;\n\n    if (tokens.length > 1) {\n      q = new TermsQuery({\n        field: this.field,\n        expand: this.expand,\n        terms: tokens,\n        fuzziness: this.fuzziness,\n        boost: this.boost,\n        minimum_should_match: (this.operator === 'and' && this.minMatch === 0) ? tokens.length : this.minMatch\n      });\n      /*\n            q = new BoolQuery({\n            should: tokens\n                .map((token) => new TermsQuery({\n                    field: this.field,\n                    expand: this.expand,\n                    terms: [token.toString()],\n                    fuzziness: this.fuzziness,\n                    boost: this.boost\n                }))\n            ,\n            minimum_should_match: (this.operator === \"and\" && this.minMatch === 0) ? tokens.length : this.minMatch\n            }); */\n    } else if (tokens.length === 1) {\n      q = new TermsQuery({\n        field: this.field,\n        expand: this.expand,\n        terms: [tokens[0].toString()],\n        fuzziness: this.fuzziness,\n        boost: this.boost\n      });\n    } else {\n      q = new MatchAllQuery({\n\n      });\n    }\n    return q;\n  }\n}\nQueryRepository.register('match', (repository, options, queryOptions) => {\n  var fields = Object.entries(options).filter((r) => ['fuzziness', 'operator'].indexOf(r[0]) < 0);\n\n  if (fields.length === 0) return repository.parse('match_all', {}, {});\n  if (fields.length > 1) {\n    return repository.parse('bool', {\n      'should': fields.map(([fieldName, terms]) => {\n        return {\n          'match': {\n            [fieldName]: terms,\n            fuzziness: options.fuzziness,\n            operator: options.operator\n          },\n          'expand': !!queryOptions.expand\n        };\n      }),\n      'minimum_should_match': options && options.operator &&\n        typeof options.operator === 'string' &&\n        options.operator.toLowerCase() === 'and' ? fields.length : 1\n    });\n  }\n  return new MatchQuery({\n    field: fields[0][0],\n    query: fields[0][1],\n    fuzziness: options.fuzziness,\n    expand: !!queryOptions.expand,\n    operator: options &&\n      options.operator &&\n      typeof options.operator === 'string' &&\n      options.operator.toLowerCase() === 'and' ? 'and' : 'or',\n    minimum_must_match: options &&\n      options.operator &&\n      typeof options.operator === 'string' &&\n      options.operator.toLowerCase() === 'and' ? 0 : 1\n  });\n\n});\n\nQueryRepository.register('terms', (repository, options) => {\n  var fields = Object.entries(options);\n\n  if (fields.length === 0) return repository.parse('match_all', {}, {});\n  if (fields.length > 1) {\n    return repository.parse('bool', {\n      'should': fields.map(([fieldName, terms]) => {\n        return {\n          'terms': {\n            [fieldName]: terms\n          }\n        };\n      })\n    });\n  }\n  return new TermsQuery({\n    field: fields[0][0],\n    terms: fields[0][1]\n  });\n\n});\n\nQueryRepository.register('match_all', (repository, options) => {\n  return new MatchAllQuery({\n    boost: options.boost || 1\n  });\n});\nexport { Repository, QueryRepository, Query, BoolQuery, MatchAllQuery, MatchQuery, TermsQuery };\n","import intf from './interface.js';\nimport { QueryRepository } from '../dsl.js';\n\nexport default class Converter {\n\n  constructor(inner, options) {\n    if (!(inner instanceof intf)) throw Error('The object provided must be an instance of the index interface');\n    this.inner = inner;\n    this.eslunr = options.elasticlunr;\n    this.defaultPipeline = this.inner.pipeline;\n    this.documentStore = this.inner.documentStore;\n  }\n\n  getRef() {\n    return this.inner.getRef();\n  }\n\n  saveDocument(toSave) {\n    for (let o of Object.values(this.inner._fields)) {\n      o._store = toSave;\n    }\n  }\n\n  toJSON() {\n    return this.inner.toJSON();\n\n  }\n  on() {\n    return this.inner.emitter.addListener.apply(this.inner.emitter, arguments);\n  }\n\n  load(idx) {\n    // Sucks, but we need to reyhydrate the pipelines here\n    // This is what happens when you have stuff in the global scope, boys and girls!\n    if (idx.version === '1.0.0') {\n      if (idx.fields) {\n        for (let o = 0; o < idx.fields.length; o++) {\n          if (\n            idx.fields[o] &&\n            idx.fields[o].settings &&\n            idx.fields[o].settings.pipeline &&\n            Array.isArray(idx.fields[o].settings.pipeline)\n          ) {\n            if (idx.fields[o].settings.pipeline.length > 0) {\n              (function (eslunr) {\n                var pipeline = new eslunr.Pipeline();\n\n                idx.fields[o].settings.pipeline.forEach((fnName) => {\n                  var fn = eslunr.Pipeline.getRegisteredFunction(fnName);\n\n                  if (fn) {\n                    pipeline.add(fn);\n                  } else {\n                    throw new Error('Cannot load un-registered function: ' + fnName);\n                  }\n                });\n\n                let proxy = new Proxy(pipeline, {\n                  get: (target, propKey, receiver) => {\n                    var propValue = target[propKey];\n\n                    if (typeof propValue !== 'function' || propKey !== 'run') {\n                      return propValue;\n                    }\n\n                    return function () {\n                      return propValue.call(this, eslunr.tokenizer(arguments[0]));\n                    };\n\n                  }\n                });\n\n                idx.fields[o].settings.pipeline = proxy;\n              })(this.eslunr);\n            } else {\n              idx.fields[o].settings.pipeline = this.defaultPipeline;\n            }\n          } else {\n            delete idx.fields[o].settings.pipeline;\n          }\n        }\n      }\n      this.inner._load(idx);\n    } else {\n      if (idx && idx.pipeline) {\n        idx.pipeline = this.eslunr.Pipeline.load(idx.pipeline);\n      }\n      this.inner._legacyLoad(idx);\n    }\n    return this;\n  }\n  off() {\n    return this.inner.emitter.removeListener.apply(this.inner.emitter, arguments);\n  }\n\n  setRef(field) {\n    return this.inner.setRef(field);\n  }\n\n  addDoc(doc, mute) {\n    return this.inner.add([doc], mute);\n  }\n  add(doc) {\n    return this.addDoc(doc);\n  }\n  elasticsearch(query) {\n    if (!query || !query.query) throw Error('Root object must have a query element');\n    let root = query.query;\n    let keys = Object.entries(root);\n    let q = QueryRepository.parse(keys[0][0], keys[0][1], root);\n\n    return q.score(this.inner).sort((a, b) => a.score < b.score);\n  }\n  highlight(ref, matched) {\n    return this.inner.highlight(ref, matched);\n  }\n  search(query, options) {\n    if (!query) return [];\n    // lunr/elasticlunr common format\n    if (typeof query === 'string') {\n      // lunr search/elasticlunr simple search\n      if (!options || typeof options !== 'object') {\n        return this.elasticsearch({\n          'query': {\n            'bool': {\n              'should': this.inner.getFields().filter((field) => field !== this.inner.getRef()).map((field) => {\n                return {\n                  'match': {\n                    [field]: query\n                  }\n                };\n              })\n            }\n          }\n        });\n      }\n      // elasticlunr boosted queries\n      if (options.fields) {\n        return this.elasticsearch({\n          'query': {\n            'bool': {\n              'should': this.inner.getFields()\n                .filter((field) => field !== this.inner.getRef() &&\n                  (options.fields[field] && options.fields[field].boost > 0))\n                .map((field) => {\n                  return {\n                    match: {\n                      [field]: query\n                    },\n                    boost: options.fields[field].boost\n                  };\n                })\n            }\n          }\n        });\n      }\n    }\n    // elasticlunr advanced query format\n    if (typeof query === 'object' && !query.query) {\n      if (!options) {\n        return this.search(query, {operator: 'OR'});\n      }\n      let search = Object.entries(query);\n\n      return this.elasticsearch({\n        'query': {\n          'bool': {\n            'should': search.map(([field, content]) => {\n              return {\n                'match': {\n                  [field]: content,\n                  'operator': options && options.bool && options.bool.toLowerCase() === 'and' ? 'and' : 'or'\n                },\n                'expand': !!(options && options.expand)\n              };\n            })\n          }\n        }\n      });\n    }\n    return this.elasticsearch(query);\n  }\n\n  updateDoc(doc, mute) {\n    return this.inner.update([doc], mute);\n  }\n\n  removeDoc(doc, mute) {\n    const idField = this.getRef();\n\n    if (!doc || !doc[idField]) return null;\n    return this.inner.remove([doc[idField]], mute);\n  }\n  removeDocByRef(doc, mute) {\n    this.inner.remove([doc], mute);\n    return;\n  }\n\n  use(plugin) {\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    args.unshift(this);\n    plugin.apply(this, args);\n  }\n\n  getFields() {\n    return this.inner.getFields();\n  }\n\n  getField(field) {\n    return this.inner.getField(field);\n  }\n\n  addField(field) {\n    return this.inner.addField(field);\n  }\n  field(field) {\n    return this.addField(field);\n  }\n}\n","// import idx096 from \"./index/legacy.js\";\nimport { Index } from './index/withPosition.js';\nimport Convert from './index/converter.js';\n\nclass IndexAssembly {\n\n  constructor(elasticlunr) {\n    this.elasticlunr = elasticlunr;\n    this.knownVersions = [];\n    this.components = {};\n  }\n\n  registerComponent(componentType, item) {\n    this.components[componentType] = item;\n  }\n\n  register(version, generator, isDefault) {\n    this.knownVersions.push({\n      version: version,\n      generator: generator,\n      default: isDefault\n    });\n  }\n\n  loadComponent(component) {\n    if (this.components[component]) return this.components[component](this);\n    return null;\n  }\n\n  loadIndex(data) {\n    if (!data.version) {\n      throw Error('No index version provided. Are you sure this is an elasticlunr index?');\n    }\n    for (let o of this.knownVersions) {\n      if (typeof o.version === 'string' && data.version === o.version) {\n        return o.generator(this).load(data);\n      }\n      if (o.version instanceof RegExp && o.version.test(data.version)) {\n        return o.generator(this).load(data);\n      }\n    }\n    throw Error(`Unknown index version ${data.version}`);\n  }\n\n  createDefault() {\n    for (let o of this.knownVersions) {\n      if (o.default) return o.generator(this);\n    }\n    return null;\n  }\n};\n\nexport default function (elasticlunr) {\n  const newIndexShim = (elasticlunr) => {\n    return (components) => {\n      // This is where the great big wrapping magic happens\n      var pipeline = new elasticlunr.Pipeline();\n      var proxy = new Proxy(pipeline, {\n        get: function (target, propKey, receiver) {\n          var propValue = target[propKey];\n\n          if (typeof propValue !== 'function' || propKey !== 'run') {\n            return propValue;\n          }\n\n          return function () {\n            return propValue.call(this, elasticlunr.tokenizer(arguments[0]));\n          };\n\n        }\n      });\n      var objE = new Convert(new Index({\n        storePositions: true,\n        emitter: new elasticlunr.EventEmitter(),\n        storeDocuments: true,\n        pipeline: proxy\n      }), {\n        elasticlunr: elasticlunr,\n        pipeline: proxy\n      });\n\n      objE.pipeline = proxy;\n      return objE;\n    };\n  };\n\n  var idx = new IndexAssembly(elasticlunr);\n  //    var i096 = idx096(elasticlunr);\n  var newIndex = newIndexShim(elasticlunr);\n\n  /* idx.register(\"0.9.6\", function(components) {\n        return i096(components);\n    }, true); */\n\n  idx.register(new RegExp('^(0.9|1.0)'), function (components) {\n    var o = newIndex(components);\n\n    return o;\n  }, true);\n\n  let idxLoader = function () {\n    return idx.createDefault();\n  };\n\n  idxLoader.load = function (data) {\n    return idx.loadIndex(data);\n  };\n\n  idxLoader.registerComponent = function (component, generator) {\n    return idx.registerComponent(component, generator);\n  };\n\n  idxLoader.register = function (version, generator, isDefault) {\n    return idx.register(version, generator, isDefault);\n  };\n\n  elasticlunr.Index = idxLoader;\n  // Default settings\n  idxLoader.registerComponent('documentStore', function (registry) {\n    return new elasticlunr.DocumentStore();\n  });\n  idxLoader.registerComponent('eventEmitter', function (registry) {\n    return new elasticlunr.EventEmitter();\n  });\n  idxLoader.registerComponent('pipeline', function (registry) {\n    return new elasticlunr.Pipeline();\n  });\n};\n","/* !\n * elasticlunr.Configuration\n * Copyright (C) @YEAR Wei Song\n */\n\n/**\n  * elasticlunr.Configuration is used to analyze the user search configuration.\n  *\n  * By elasticlunr.Configuration user could set query-time boosting, boolean model in each field.\n  *\n  * Currently configuration supports:\n  * 1. query-time boosting, user could set how to boost each field.\n  * 2. boolean model chosing, user could choose which boolean model to use for each field.\n  * 3. token expandation, user could set token expand to True to improve Recall. Default is False.\n  *\n  * Query time boosting must be configured by field category, \"boolean\" model could be configured\n  * by both field category or globally as the following example. Field configuration for \"boolean\"\n  * will overwrite global configuration.\n  * Token expand could be configured both by field category or golbally. Local field configuration will\n  * overwrite global configuration.\n  *\n  * configuration example:\n  * {\n  *   fields:{\n  *     title: {boost: 2},\n  *     body: {boost: 1}\n  *   },\n  *   bool: \"OR\"\n  * }\n  *\n  * \"bool\" field configuation overwrite global configuation example:\n  * {\n  *   fields:{\n  *     title: {boost: 2, bool: \"AND\"},\n  *     body: {boost: 1}\n  *   },\n  *   bool: \"OR\"\n  * }\n  *\n  * \"expand\" example:\n  * {\n  *   fields:{\n  *     title: {boost: 2, bool: \"AND\"},\n  *     body: {boost: 1}\n  *   },\n  *   bool: \"OR\",\n  *   expand: true\n  * }\n  *\n  * \"expand\" example for field category:\n  * {\n  *   fields:{\n  *     title: {boost: 2, bool: \"AND\", expand: true},\n  *     body: {boost: 1}\n  *   },\n  *   bool: \"OR\"\n  * }\n  *\n  * setting the boost to 0 ignores the field (this will only search the title):\n  * {\n  *   fields:{\n  *     title: {boost: 1},\n  *     body: {boost: 0}\n  *   }\n  * }\n  *\n  * then, user could search with configuration to do query-time boosting.\n  * idx.search('oracle database', {fields: {title: {boost: 2}, body: {boost: 1}}});\n  *\n  *\n  * @constructor\n  *\n  * @param {String} config user configuration\n  * @param {Array} fields fields of index instance\n  * @module\n  */\nexport default function (elasticlunr) {\n  elasticlunr.Configuration = function (config, fields) {\n    var userConfig;\n\n    config = config || '';\n\n    if (fields === undefined || fields === null) {\n      throw new Error('fields should not be null');\n    }\n\n    this.config = {};\n\n    if (config.length === 0) {\n      this.buildDefaultConfig(fields);\n    } else {\n      try {\n        userConfig = JSON.parse(config);\n        this.buildUserConfig(userConfig, fields);\n      } catch (error) {\n        elasticlunr.utils.warn('user configuration parse failed, will use default configuration');\n        this.buildDefaultConfig(fields);\n      }\n    }\n  };\n\n  /**\n   * Build default search configuration.\n   *\n   * @param {Array} fields fields of index instance\n   */\n  elasticlunr.Configuration.prototype.buildDefaultConfig = function (fields) {\n    this.reset();\n    fields.forEach(function (field) {\n      this.config[field] = {\n        boost: 1,\n        bool: 'OR',\n        expand: false\n      };\n    }, this);\n  };\n\n  /**\n   * Build user configuration.\n   *\n   * @param {JSON} config User JSON configuratoin\n   * @param {Array} fields fields of index instance\n   */\n  elasticlunr.Configuration.prototype.buildUserConfig = function (config, fields) {\n    var globalBool = 'OR';\n    var globalExpand = false;\n    var field, fieldConfig, fieldExpand;\n\n    this.reset();\n    if ('bool' in config) {\n      globalBool = config['bool'] || globalBool;\n    }\n\n    if ('expand' in config) {\n      globalExpand = config['expand'] || globalExpand;\n    }\n\n    if ('fields' in config) {\n      for (field in config['fields']) {\n        if (fields.indexOf(field) > -1) {\n          fieldConfig = config['fields'][field];\n          fieldExpand = globalExpand;\n\n          if (fieldConfig.expand !== undefined) {\n            fieldExpand = fieldConfig.expand;\n          }\n\n          this.config[field] = {\n            boost: (fieldConfig.boost || fieldConfig.boost === 0) ? fieldConfig.boost : 1,\n            bool: fieldConfig.bool || globalBool,\n            expand: fieldExpand\n          };\n        } else {\n          elasticlunr.utils.warn('field name in user configuration not found in index instance fields');\n        }\n      }\n    } else {\n      this.addAllFields2UserConfig(globalBool, globalExpand, fields);\n    }\n  };\n\n  /**\n   * Add all fields to user search configuration.\n   *\n   * @param {String} bool Boolean model\n   * @param {String} expand Expand model\n   * @param {Array} fields fields of index instance\n   */\n  elasticlunr.Configuration.prototype.addAllFields2UserConfig = function (bool, expand, fields) {\n    fields.forEach(function (field) {\n      this.config[field] = {\n        boost: 1,\n        bool: bool,\n        expand: expand\n      };\n    }, this);\n  };\n\n  /**\n   * get current user configuration\n   */\n  elasticlunr.Configuration.prototype.get = function () {\n    return this.config;\n  };\n\n  /**\n   * reset user search configuration.\n   */\n  elasticlunr.Configuration.prototype.reset = function () {\n    this.config = {};\n  };\n};\n","/* !\n * elasticlunr.EventEmitter\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\nexport default function (elasticlunr) {\n  /**\n   * elasticlunr.EventEmitter is an event emitter for elasticlunr.\n   * It manages adding and removing event handlers and triggering events and their handlers.\n   *\n   * Each event could has multiple corresponding functions,\n   * these functions will be called as the sequence that they are added into the event.\n   *\n   * @constructor\n   */\n  elasticlunr.EventEmitter = function () {\n    this.events = {};\n  };\n\n  /**\n   * Binds a handler function to a specific event(s).\n   *\n   * Can bind a single function to many different events in one call.\n   *\n   * @param {String} [eventName] The name(s) of events to bind this function to.\n   * @param {Function} fn The function to call when an event is fired.\n   * @memberOf EventEmitter\n   */\n  elasticlunr.EventEmitter.prototype.addListener = function () {\n    var args = Array.prototype.slice.call(arguments),\n      fn = args.pop(),\n      names = args;\n\n    if (typeof fn !== 'function') throw new TypeError('last argument must be a function');\n\n    names.forEach(function (name) {\n      if (!this.hasHandler(name)) this.events[name] = [];\n      this.events[name].push(fn);\n    }, this);\n\n    return true;\n  };\n\n  /**\n   * Removes a handler function from a specific event.\n   *\n   * @param {String} eventName The name of the event to remove this function from.\n   * @param {Function} fn The function to remove from an event.\n   * @memberOf EventEmitter\n   */\n  elasticlunr.EventEmitter.prototype.removeListener = function (name, fn) {\n    var fnIndex;\n\n    if (!this.hasHandler(name)) return;\n\n    fnIndex = this.events[name].indexOf(fn);\n\n    if (fnIndex === -1) return;\n\n    this.events[name].splice(fnIndex, 1);\n\n    if (this.events[name].length === 0) delete this.events[name];\n  };\n\n  /**\n   * Call all functions that bounded to the given event.\n   *\n   * Additional data can be passed to the event handler as arguments to `emit`\n   * after the event name.\n   *\n   * @param {String} eventName The name of the event to emit.\n   * @memberOf EventEmitter\n   */\n  elasticlunr.EventEmitter.prototype.emit = function (name) {\n    var args;\n\n    if (!this.hasHandler(name)) return;\n\n    args = Array.prototype.slice.call(arguments, 1);\n\n    this.events[name].forEach(function (fn) {\n      fn.apply(undefined, args);\n    }, this);\n  };\n\n  /**\n   * Checks whether a handler has ever been stored against an event.\n   *\n   * @param {String} eventName The name of the event to check.\n   * @private\n   * @memberOf EventEmitter\n   */\n  elasticlunr.EventEmitter.prototype.hasHandler = function (name) {\n    return name in this.events;\n  };\n};\n","/* !\n * elasticlunr.Pipeline\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\n/**\n   * elasticlunr.Pipelines maintain an ordered list of functions to be applied to\n   * both documents tokens and query tokens.\n   *\n   * An instance of elasticlunr.Index will contain a pipeline\n   * with a trimmer, a stop word filter, an English stemmer. Extra\n   * functions can be added before or after either of these functions or these\n   * default functions can be removed.\n   *\n   * When run the pipeline, it will call each function in turn.\n   *\n   * The output of the functions in the pipeline will be passed to the next function\n   * in the pipeline. To exclude a token from entering the index the function\n   * should return undefined, the rest of the pipeline will not be called with\n   * this token.\n   *\n   * For serialisation of pipelines to work, all functions used in an instance of\n   * a pipeline should be registered with elasticlunr.Pipeline. Registered functions can\n   * then be loaded. If trying to load a serialised pipeline that uses functions\n   * that are not registered an error will be thrown.\n   *\n   * If not planning on serialising the pipeline then registering pipeline functions\n   * is not necessary.\n   *\n   * @constructor\n   */\n\nexport default function (elasticlunr) {\n\n  elasticlunr.Pipeline = function () {\n    this._queue = [];\n  };\n\n  elasticlunr.Pipeline.registeredFunctions = {};\n\n  /**\n   * Register a function in the pipeline.\n   *\n   * Functions that are used in the pipeline should be registered if the pipeline\n   * needs to be serialised, or a serialised pipeline needs to be loaded.\n   *\n   * Registering a function does not add it to a pipeline, functions must still be\n   * added to instances of the pipeline for them to be used when running a pipeline.\n   *\n   * @param {Function} fn The function to register.\n   * @param {String} label The label to register this function with\n   * @memberOf Pipeline\n   */\n\n  elasticlunr.Pipeline.registerFunction = function (fn, label) {\n    if (label in elasticlunr.Pipeline.registeredFunctions) {\n      elasticlunr.utils.warn('Overwriting existing registered function: ' + label);\n    }\n\n    fn.label = label;\n    elasticlunr.Pipeline.registeredFunctions[label] = fn;\n  };\n\n  /**\n   * Get a registered function in the pipeline.\n   *\n   * @param {String} label The label of registered function.\n   * @return {Function}\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.getRegisteredFunction = function (label) {\n    if ((label in elasticlunr.Pipeline.registeredFunctions) !== true) {\n      return null;\n    }\n\n    return elasticlunr.Pipeline.registeredFunctions[label];\n  };\n\n  /**\n   * Warns if the function is not registered as a Pipeline function.\n   *\n   * @param {Function} fn The function to check for.\n   * @private\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.warnIfFunctionNotRegistered = function (fn) {\n    var isRegistered = fn.label && (fn.label in this.registeredFunctions);\n\n    if (!isRegistered) {\n      elasticlunr.utils.warn(\n        'Function is not registered with pipeline. ' +\n        'This may cause problems when serialising the index.\\n',\n        fn\n      );\n    }\n  };\n\n  /**\n   * Loads a previously serialised pipeline.\n   *\n   * All functions to be loaded must already be registered with elasticlunr.Pipeline.\n   * If any function from the serialised data has not been registered then an\n   * error will be thrown.\n   *\n   * @param {Object} serialised The serialised pipeline to load.\n   * @return {elasticlunr.Pipeline}\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.load = function (serialised) {\n    var pipeline = new elasticlunr.Pipeline();\n\n    serialised.forEach(function (fnName) {\n      var fn = elasticlunr.Pipeline.getRegisteredFunction(fnName);\n\n      if (fn) {\n        pipeline.add(fn);\n      } else {\n        throw new Error('Cannot load un-registered function: ' + fnName);\n      }\n    });\n\n    return pipeline;\n  };\n\n  /**\n   * Adds new functions to the end of the pipeline.\n   *\n   * Logs a warning if the function has not been registered.\n   *\n   * @param {Function} functions Any number of functions to add to the pipeline.\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.add = function () {\n    var fns = Array.prototype.slice.call(arguments);\n\n    fns.forEach(function (fn) {\n      elasticlunr.Pipeline.warnIfFunctionNotRegistered(fn);\n      this._queue.push(fn);\n    }, this);\n  };\n\n  /**\n   * Adds a single function after a function that already exists in the\n   * pipeline.\n   *\n   * Logs a warning if the function has not been registered.\n   * If existingFn is not found, throw an Exception.\n   *\n   * @param {Function} existingFn A function that already exists in the pipeline.\n   * @param {Function} newFn The new function to add to the pipeline.\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.after = function (existingFn, newFn) {\n    var pos;\n\n    elasticlunr.Pipeline.warnIfFunctionNotRegistered(newFn);\n    pos = this._queue.indexOf(existingFn);\n\n    if (pos === -1) {\n      throw new Error('Cannot find existingFn');\n    }\n\n    this._queue.splice(pos + 1, 0, newFn);\n  };\n\n  /**\n   * Adds a single function before a function that already exists in the\n   * pipeline.\n   *\n   * Logs a warning if the function has not been registered.\n   * If existingFn is not found, throw an Exception.\n   *\n   * @param {Function} existingFn A function that already exists in the pipeline.\n   * @param {Function} newFn The new function to add to the pipeline.\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.before = function (existingFn, newFn) {\n    var pos;\n\n    elasticlunr.Pipeline.warnIfFunctionNotRegistered(newFn);\n    pos = this._queue.indexOf(existingFn);\n\n    if (pos === -1) {\n      throw new Error('Cannot find existingFn');\n    }\n\n    this._queue.splice(pos, 0, newFn);\n  };\n\n  /**\n   * Removes a function from the pipeline.\n   *\n   * @param {Function} fn The function to remove from the pipeline.\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.remove = function (fn) {\n    var pos = this._queue.indexOf(fn);\n\n    if (pos === -1) {\n      return;\n    }\n\n    this._queue.splice(pos, 1);\n  };\n\n  /**\n   * Runs the current list of functions that registered in the pipeline against the\n   * input tokens.\n   *\n   * @param {Array} tokens The tokens to run through the pipeline.\n   * @return {Array}\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.run = function (tokens) {\n    if (!this._queue.length) {\n      return tokens;\n    }\n    return this._queue.reduce(function (out, queueEntry) {\n      return out.reduce(function (state, element, i) {\n        var output = queueEntry(element, i, out);\n\n        if (!Array.isArray(output)) output = [output];\n        output.filter(function (e) {\n          return e !== null && e !== void 0;\n        }).forEach(function (item) {\n          state.push(item);\n        });\n        return state;\n      }, []).filter(function (e) {\n        return e !== '';\n      });\n    }, tokens);\n  };\n\n  /**\n   * Resets the pipeline by removing any existing processors.\n   *\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.reset = function () {\n    this._queue = [];\n  };\n\n  /**\n    * Get the pipeline if user want to check the pipeline.\n    *\n    * @memberOf Pipeline\n    */\n  elasticlunr.Pipeline.prototype.get = function () {\n    return this._queue;\n  };\n\n  /**\n   * Returns a representation of the pipeline ready for serialisation.\n   * Only serialize pipeline function's name. Not storing function, so when\n   * loading the archived JSON index file, corresponding pipeline function is\n   * added by registered function of elasticlunr.Pipeline.registeredFunctions\n   *\n   * Logs a warning if the function has not been registered.\n   *\n   * @return {Array}\n   * @memberOf Pipeline\n   */\n  elasticlunr.Pipeline.prototype.toJSON = function () {\n    return this._queue.map(function (fn) {\n      elasticlunr.Pipeline.warnIfFunctionNotRegistered(fn);\n      return fn.label;\n    });\n  };\n};\n","/* !\n * elasticlunr.DocumentStore\n * Copyright (C) @YEAR Wei Song\n */\n/**\n * Cloning object\n *\n * @param {Object} object in JSON format\n * @return {Object} copied object\n */\n\nfunction clone(obj) {\n  var copy, attr;\n\n  if (obj === null || typeof obj !== 'object') return obj;\n\n  copy = obj.constructor();\n\n  for (attr in obj) {\n    if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n  }\n\n  return copy;\n}\n\n/**\n * elasticlunr.DocumentStore is a simple key-value document store used for storing\n * sets of tokens for documents stored in index.\n *\n * elasticlunr.DocumentStore store original JSON format documents that you\n * could build search snippet by this original JSON document.\n *\n * user could choose whether original JSON format document should be store,\n * if no configuration then document will be stored defaultly.\n * If user care more about the index size, user could select not store JSON documents,\n * then this will has some defects, such as user could not use JSON document\n * to generate snippets of search results.\n *\n * @param {Boolean} save If the original JSON document should be stored.\n * @constructor\n * @module\n */\nexport default function (elasticlunr) {\n  elasticlunr.DocumentStore = function (save) {\n    this.setDocStored(save);\n\n    this.docs = {};\n    this.docInfo = {};\n    this.length = 0;\n  };\n\n  /**\n   * Loads a previously serialised document store\n   *\n   * @param {Object} serialisedData The serialised document store to load.\n   * @return {elasticlunr.DocumentStore}\n   */\n  elasticlunr.DocumentStore.load = function (serialisedData) {\n    var store = new this();\n\n    store.length = serialisedData.length;\n    store.docs = serialisedData.docs;\n    store.docInfo = serialisedData.docInfo;\n    store._save = serialisedData.save;\n\n    return store;\n  };\n\n  /**\n   * Resets the contents of the document store\n   *\n   * @param {Boolean} canSave whether to allow saving documents.\n   * @return {Boolean}\n   */\n\n  elasticlunr.DocumentStore.prototype.resetStore = function (canSave) {\n    this.docs = {};\n    this.docInfo = {};\n    this.length = 0;\n    return this.setDocStored(canSave);\n  };\n\n  /**\n   * Sets whether the documents are stored or not.\n   *\n   * @param {Boolean} canSave whether the documents are stored\n   * @return {Boolean}\n   */\n\n  elasticlunr.DocumentStore.prototype.setDocStored = function (canSave) {\n    if (canSave === null || canSave === undefined) {\n      this._save = true;\n    } else {\n      this._save = canSave;\n    }\n    return this._save;\n  };\n  /**\n   * check if current instance store the original doc\n   *\n   * @return {Boolean}\n   */\n  elasticlunr.DocumentStore.prototype.isDocStored = function () {\n    return this._save;\n  };\n\n  /**\n   * Stores the given doc in the document store against the given id.\n   * If docRef already exist, then update doc.\n   *\n   * Document is store by original JSON format, then you could use original document to generate search snippets.\n   *\n   * @param {Integer|String} docRef The key used to store the JSON format doc.\n   * @param {Object} doc The JSON format doc.\n   */\n  elasticlunr.DocumentStore.prototype.addDoc = function (docRef, doc) {\n    if (!this.hasDoc(docRef)) this.length++;\n\n    if (this._save === true) {\n      this.docs[docRef] = clone(doc);\n    } else {\n      this.docs[docRef] = null;\n    }\n  };\n\n  /**\n   * Retrieves the JSON doc from the document store for a given key.\n   *\n   * If docRef not found, return null.\n   * If user set not storing the documents, return null.\n   *\n   * @param {Integer|String} docRef The key to lookup and retrieve from the document store.\n   * @return {Object}\n   * @memberOf DocumentStore\n   */\n  elasticlunr.DocumentStore.prototype.getDoc = function (docRef) {\n    if (this.hasDoc(docRef) === false) return null;\n    return this.docs[docRef];\n  };\n\n  /**\n   * Checks whether the document store contains a key (docRef).\n   *\n   * @param {Integer|String} docRef The id to look up in the document store.\n   * @return {Boolean}\n   * @memberOf DocumentStore\n   */\n  elasticlunr.DocumentStore.prototype.hasDoc = function (docRef) {\n    return docRef in this.docs;\n  };\n\n  /**\n   * Removes the value for a key in the document store.\n   *\n   * @param {Integer|String} docRef The id to remove from the document store.\n   * @memberOf DocumentStore\n   */\n  elasticlunr.DocumentStore.prototype.removeDoc = function (docRef) {\n    if (!this.hasDoc(docRef)) return;\n\n    delete this.docs[docRef];\n    delete this.docInfo[docRef];\n    this.length--;\n  };\n\n  /**\n   * Add field length of a document's field tokens from pipeline results.\n   * The field length of a document is used to do field length normalization\n   * even without the original JSON document stored.\n   *\n   * @param {Integer|String} docRef document's id or reference\n   * @param {String} fieldName field name\n   * @param {Integer} length field length\n   */\n  elasticlunr.DocumentStore.prototype.addFieldLength = function (docRef, fieldName, length) {\n    if (docRef === null || docRef === undefined) return;\n    if (this.hasDoc(docRef) === false) return;\n\n    if (!this.docInfo[docRef]) this.docInfo[docRef] = {};\n    this.docInfo[docRef][fieldName] = length;\n  };\n\n  /**\n   * Update field length of a document's field tokens from pipeline results.\n   * The field length of a document is used to do field length normalization even\n   * without the original JSON document stored.\n   *\n   * @param {Integer|String} docRef document's id or reference\n   * @param {String} fieldName field name\n   * @param {Integer} length field length\n   */\n  elasticlunr.DocumentStore.prototype.updateFieldLength = function (docRef, fieldName, length) {\n    if (docRef === null || docRef === undefined) return;\n    if (this.hasDoc(docRef) === false) return;\n\n    this.addFieldLength(docRef, fieldName, length);\n  };\n\n  /**\n   * get field length of a document by docRef\n   *\n   * @param {Integer|String} docRef document id or reference\n   * @param {String} fieldName field name\n   * @return {Integer} field length\n   */\n  elasticlunr.DocumentStore.prototype.getFieldLength = function (docRef, fieldName) {\n    if (docRef === null || docRef === undefined) return 0;\n\n    if (!(docRef in this.docs)) return 0;\n    if (!(fieldName in this.docInfo[docRef])) return 0;\n    return this.docInfo[docRef][fieldName];\n  };\n\n  /**\n   * Returns a JSON representation of the document store used for serialisation.\n   *\n   * @return {Object} JSON format\n   * @memberOf DocumentStore\n   */\n  elasticlunr.DocumentStore.prototype.toJSON = function () {\n    return {\n      docs: this.docs,\n      docInfo: this.docInfo,\n      length: this.length,\n      save: this._save\n    };\n  };\n};\n","/**\n * sorted_set.js is added only to make elasticlunr.js compatible with lunr-languages.\n * if elasticlunr.js support different languages by default, this will make elasticlunr.js\n * much bigger that not good for browser usage.\n *\n */\n\n/* !\n * lunr.SortedSet\n * Copyright (C) @YEAR Oliver Nightingale\n */\n\nexport default function (lunr) {\n\n  /**\n   * lunr.SortedSets are used to maintain an array of uniq values in a sorted\n   * order.\n   *\n   * @constructor\n   */\n  lunr.SortedSet = function () {\n    this.length = 0;\n    this.elements = [];\n  };\n\n  /**\n   * Loads a previously serialised sorted set.\n   *\n   * @param {Array} serialisedData The serialised set to load.\n   * @returns {lunr.SortedSet}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.load = function (serialisedData) {\n    var set = new this();\n\n    set.elements = serialisedData;\n    set.length = serialisedData.length;\n\n    return set;\n  };\n\n  /**\n   * Inserts new items into the set in the correct position to maintain the\n   * order.\n   *\n   * @param {Object} The objects to add to this set.\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.add = function () {\n    var i, element;\n\n    for (i = 0; i < arguments.length; i++) {\n      element = arguments[i];\n      if (~this.indexOf(element)) continue;\n      this.elements.splice(this.locationFor(element), 0, element);\n    }\n\n    this.length = this.elements.length;\n  };\n\n  /**\n   * Converts this sorted set into an array.\n   *\n   * @returns {Array}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.toArray = function () {\n    return this.elements.slice();\n  };\n\n  /**\n   * Creates a new array with the results of calling a provided function on every\n   * element in this sorted set.\n   *\n   * Delegates to Array.prototype.map and has the same signature.\n   *\n   * @param {Function} fn The function that is called on each element of the\n   * set.\n   * @param {Object} ctx An optional object that can be used as the context\n   * for the function fn.\n   * @returns {Array}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.map = function (fn, ctx) {\n    return this.elements.map(fn, ctx);\n  };\n\n  /**\n   * Executes a provided function once per sorted set element.\n   *\n   * Delegates to Array.prototype.forEach and has the same signature.\n   *\n   * @param {Function} fn The function that is called on each element of the\n   * set.\n   * @param {Object} ctx An optional object that can be used as the context\n   * @memberOf SortedSet\n   * for the function fn.\n   */\n  lunr.SortedSet.prototype.forEach = function (fn, ctx) {\n    return this.elements.forEach(fn, ctx);\n  };\n\n  /**\n   * Returns the index at which a given element can be found in the\n   * sorted set, or -1 if it is not present.\n   *\n   * @param {Object} elem The object to locate in the sorted set.\n   * @returns {Number}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.indexOf = function (elem) {\n    var start = 0,\n      end = this.elements.length,\n      sectionLength = end - start,\n      pivot = start + Math.floor(sectionLength / 2),\n      pivotElem = this.elements[pivot];\n\n    while (sectionLength > 1) {\n      if (pivotElem === elem) return pivot;\n\n      if (pivotElem < elem) start = pivot;\n      if (pivotElem > elem) end = pivot;\n\n      sectionLength = end - start;\n      pivot = start + Math.floor(sectionLength / 2);\n      pivotElem = this.elements[pivot];\n    }\n\n    if (pivotElem === elem) return pivot;\n\n    return -1;\n  };\n\n  /**\n   * Returns the position within the sorted set that an element should be\n   * inserted at to maintain the current order of the set.\n   *\n   * This function assumes that the element to search for does not already exist\n   * in the sorted set.\n   *\n   * @param {Object} elem The elem to find the position for in the set\n   * @returns {Number}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.locationFor = function (elem) {\n    var start = 0,\n      end = this.elements.length,\n      sectionLength = end - start,\n      pivot = start + Math.floor(sectionLength / 2),\n      pivotElem = this.elements[pivot];\n\n    while (sectionLength > 1) {\n      if (pivotElem < elem) start = pivot;\n      if (pivotElem > elem) end = pivot;\n\n      sectionLength = end - start;\n      pivot = start + Math.floor(sectionLength / 2);\n      pivotElem = this.elements[pivot];\n    }\n\n    if (pivotElem > elem) return pivot;\n    return pivot + 1;\n    //    if (pivotElem < elem) return pivot + 1;\n  };\n\n  /**\n   * Creates a new lunr.SortedSet that contains the elements in the intersection\n   * of this set and the passed set.\n   *\n   * @param {lunr.SortedSet} otherSet The set to intersect with this set.\n   * @returns {lunr.SortedSet}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.intersect = function (otherSet) {\n    var intersectSet = new lunr.SortedSet(),\n      i = 0, j = 0,\n      aLen = this.length, bLen = otherSet.length,\n      a = this.elements, b = otherSet.elements;\n\n    while (true) {\n      if (i > aLen - 1 || j > bLen - 1) break;\n\n      if (a[i] === b[j]) {\n        intersectSet.add(a[i]);\n        i++;\n        j++;\n        continue;\n      }\n\n      if (a[i] < b[j]) {\n        i++;\n        continue;\n      }\n\n      if (a[i] > b[j]) {\n        j++;\n        continue;\n      }\n    };\n\n    return intersectSet;\n  };\n\n  /**\n   * Makes a copy of this set\n   *\n   * @returns {lunr.SortedSet}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.clone = function () {\n    var clone = new lunr.SortedSet();\n\n    clone.elements = this.toArray();\n    clone.length = clone.elements.length;\n\n    return clone;\n  };\n\n  /**\n   * Creates a new lunr.SortedSet that contains the elements in the union\n   * of this set and the passed set.\n   *\n   * @param {lunr.SortedSet} otherSet The set to union with this set.\n   * @returns {lunr.SortedSet}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.union = function (otherSet) {\n    var longSet, shortSet, unionSet, i, shortSetElements;\n\n    if (this.length >= otherSet.length) {\n      longSet = this;\n      shortSet = otherSet;\n    } else {\n      longSet = otherSet;\n      shortSet = this;\n    }\n\n    unionSet = longSet.clone();\n\n    for (i = 0, shortSetElements = shortSet.toArray(); i < shortSetElements.length; i++) {\n      unionSet.add(shortSetElements[i]);\n    }\n\n    return unionSet;\n  };\n\n  /**\n   * Returns a representation of the sorted set ready for serialisation.\n   *\n   * @returns {Array}\n   * @memberOf SortedSet\n   */\n  lunr.SortedSet.prototype.toJSON = function () {\n    return this.toArray();\n  };\n\n};\n","import { Token } from './index/withPosition.js';\n/* !\n * elasticlunr.tokenizer\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\nexport default function (elasticlunr) {\n  var _split = function (str) {\n    var tokens = [],\n      lastIndex = 0, newIndex;\n\n    str = str.toString();\n\n    elasticlunr.tokenizer.seperator.lastIndex = 0;\n    while (lastIndex < str.length) {\n      newIndex = elasticlunr.tokenizer.seperator.exec(str);\n      // No match\n      if (!newIndex) {\n        tokens.push(new Token(str.substring(lastIndex).trim().toLowerCase(), {\n          start: lastIndex,\n          end: str.length\n        }));\n        break;\n      }\n      if (newIndex.index > lastIndex) {\n        tokens.push(new Token(\n          str.substring(lastIndex, newIndex.index).trim().toLowerCase(),\n          {\n            start: lastIndex,\n            end: newIndex.index\n          }\n        ));\n      }\n      lastIndex = newIndex.index + newIndex[0].length;\n    }\n    return tokens;\n    // str.toString().trim().toLowerCase().split(elasticlunr.tokenizer.seperator)\n  };\n  /**\n   * A function for splitting a string into tokens.\n   * Currently English is supported as default.\n   * Uses `elasticlunr.tokenizer.seperator` to split strings, you could change\n   * the value of this property to set how you want strings are split into tokens.\n   * IMPORTANT: use elasticlunr.tokenizer.seperator carefully, if you are not familiar with\n   * text process, then you'd better not change it.\n   *\n   * @module\n   * @param {String} str The string that you want to tokenize.\n   * @see elasticlunr.tokenizer.seperator\n   * @return {Array}\n   */\n\n  elasticlunr.tokenizer = function (str) {\n\n    if (!str) return [];\n    if (Array.isArray(str)) {\n      throw Error('This operation does not make sense');\n    }\n    return _split(str);\n  };\n\n  /**\n   * Default string seperator.\n   */\n  elasticlunr.tokenizer.defaultSeperator = /[\\s\\-]+/g;\n\n  /**\n   * The sperator used to split a string into tokens. Override this property to change the behaviour of\n   * `elasticlunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.\n   *\n   * @static\n   * @see elasticlunr.tokenizer\n   */\n  elasticlunr.tokenizer.seperator = elasticlunr.tokenizer.defaultSeperator;\n\n  /**\n   * Set up customized string seperator\n   *\n   * @param {Object} sep The customized seperator that you want to use to tokenize a string.\n   */\n  elasticlunr.tokenizer.setSeperator = function (sep) {\n    if (sep !== null && sep !== undefined && typeof (sep) === 'object') {\n      elasticlunr.tokenizer.seperator = sep;\n    }\n  };\n\n  /**\n   * Reset string seperator\n   *\n   */\n  elasticlunr.tokenizer.resetSeperator = function () {\n    elasticlunr.tokenizer.seperator = elasticlunr.tokenizer.defaultSeperator;\n  };\n\n  /**\n   * Get string seperator\n   *\n   */\n  elasticlunr.tokenizer.getSeperator = function () {\n    return elasticlunr.tokenizer.seperator;\n  };\n};\n","/* !\n * elasticlunr.stemmer\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt\n */\n\n/**\n * elasticlunr.stemmer is an english language stemmer, this is a JavaScript\n * implementation of the PorterStemmer taken from http://tartarus.org/~martin\n *\n * @module\n * @param {String} str The string to stem\n * @return {String}\n * @see elasticlunr.Pipeline\n */\nexport default function (elasticlunr) {\n  elasticlunr.stemmer = (function () {\n    var step2list = {\n        'ational': 'ate',\n        'tional': 'tion',\n        'enci': 'ence',\n        'anci': 'ance',\n        'izer': 'ize',\n        'bli': 'ble',\n        'alli': 'al',\n        'entli': 'ent',\n        'eli': 'e',\n        'ousli': 'ous',\n        'ization': 'ize',\n        'ation': 'ate',\n        'ator': 'ate',\n        'alism': 'al',\n        'iveness': 'ive',\n        'fulness': 'ful',\n        'ousness': 'ous',\n        'aliti': 'al',\n        'iviti': 'ive',\n        'biliti': 'ble',\n        'logi': 'log'\n      },\n\n      step3list = {\n        'icate': 'ic',\n        'ative': '',\n        'alize': 'al',\n        'iciti': 'ic',\n        'ical': 'ic',\n        'ful': '',\n        'ness': ''\n      },\n\n      c = '[^aeiou]', // consonant\n      v = '[aeiouy]', // vowel\n      C = c + '[^aeiouy]*', // consonant sequence\n      V = v + '[aeiou]*', // vowel sequence\n\n      mgr0 = '^(' + C + ')?' + V + C, // [C]VC... is m>0\n      meq1 = '^(' + C + ')?' + V + C + '(' + V + ')?$', // [C]VC[V] is m=1\n      mgr1 = '^(' + C + ')?' + V + C + V + C, // [C]VCVC... is m>1\n      s_v = '^(' + C + ')?' + v; // vowel in stem\n\n    var re_mgr0 = new RegExp(mgr0);\n    var re_mgr1 = new RegExp(mgr1);\n    var re_meq1 = new RegExp(meq1);\n    var re_s_v = new RegExp(s_v);\n\n    var re_1a = /^(.+?)(ss|i)es$/;\n    var re2_1a = /^(.+?)([^s])s$/;\n    var re_1b = /^(.+?)eed$/;\n    var re2_1b = /^(.+?)(ed|ing)$/;\n    var re_1b_2 = /.$/;\n    var re2_1b_2 = /(at|bl|iz)$/;\n    var re3_1b_2 = new RegExp('([^aeiouylsz])\\\\1$');\n    var re4_1b_2 = new RegExp('^' + C + v + '[^aeiouwxy]$');\n\n    var re_1c = /^(.+?[^aeiou])y$/;\n    var re_2 = new RegExp('^(.+?)(' + Object.keys(step2list).join('|') + ')$');\n\n    var re_3 = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;\n\n    var re_4 = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;\n    var re2_4 = /^(.+?)(s|t)(ion)$/;\n\n    var re_5 = /^(.+?)e$/;\n    var re_5_1 = /ll$/;\n    var re3_5 = new RegExp('^' + C + v + '[^aeiouwxy]$');\n\n    var porterStemmer = function porterStemmer(token) {\n      var w = token.toString();\n      var stem,\n        suffix,\n        firstch,\n        re,\n        re2,\n        re3,\n        re4,\n        fp;\n\n      if (w.length < 3) { return w; }\n\n      firstch = w.substr(0, 1);\n      if (firstch === 'y') {\n        w = firstch.toUpperCase() + w.substr(1);\n      }\n\n      // Step 1a\n      re = re_1a;\n      re2 = re2_1a;\n\n      if (re.test(w)) {\n        w = w.replace(re, '$1$2');\n      } else if (re2.test(w)) {\n        w = w.replace(re2, '$1$2');\n      }\n\n      // Step 1b\n      re = re_1b;\n      re2 = re2_1b;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        re = re_mgr0;\n        if (re.test(fp[1])) {\n          re = re_1b_2;\n          w = w.replace(re, '');\n        }\n      } else if (re2.test(w)) {\n        fp = re2.exec(w);\n\n        stem = fp[1];\n        re2 = re_s_v;\n        if (re2.test(stem)) {\n          w = stem;\n          re2 = re2_1b_2;\n          re3 = re3_1b_2;\n          re4 = re4_1b_2;\n          if (re2.test(w)) {\n            w = w + 'e';\n          } else if (re3.test(w)) {\n            re = re_1b_2;\n            w = w.replace(re, '');\n          } else if (re4.test(w)) {\n            w = w + 'e';\n          }\n        }\n      }\n\n      // Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is\n      // not the first letter of the word (so cry -> cri, by -> by, say -> say)\n      re = re_1c;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        stem = fp[1];\n        w = stem + 'i';\n      }\n\n      // Step 2\n      re = re_2;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        stem = fp[1];\n        suffix = fp[2];\n        re = re_mgr0;\n        if (re.test(stem)) {\n          w = stem + step2list[suffix];\n        }\n      }\n\n      // Step 3\n      re = re_3;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        stem = fp[1];\n        suffix = fp[2];\n        re = re_mgr0;\n        if (re.test(stem)) {\n          w = stem + step3list[suffix];\n        }\n      }\n\n      // Step 4\n      re = re_4;\n      re2 = re2_4;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        stem = fp[1];\n        re = re_mgr1;\n        if (re.test(stem)) {\n          w = stem;\n        }\n      } else if (re2.test(w)) {\n        fp = re2.exec(w);\n\n        stem = fp[1] + fp[2];\n        re2 = re_mgr1;\n        if (re2.test(stem)) {\n          w = stem;\n        }\n      }\n\n      // Step 5\n      re = re_5;\n      if (re.test(w)) {\n        fp = re.exec(w);\n\n        stem = fp[1];\n        re = re_mgr1;\n        re2 = re_meq1;\n        re3 = re3_5;\n        if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {\n          w = stem;\n        }\n      }\n\n      re = re_5_1;\n      re2 = re_mgr1;\n      if (re.test(w) && re2.test(w)) {\n        re = re_1b_2;\n        w = w.replace(re, '');\n      }\n\n      // and turn initial Y back to y\n\n      if (firstch === 'y') {\n        w = firstch.toLowerCase() + w.substr(1);\n      }\n\n      return token.update((i) => w);\n    };\n\n    return porterStemmer;\n  })();\n\n  elasticlunr.Pipeline.registerFunction(elasticlunr.stemmer, 'stemmer');\n};\n","/* !\n * elasticlunr.stopWordFilter\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\n/**\n * elasticlunr.stopWordFilter is an English language stop words filter, any words\n * contained in the stop word list will not be passed through the filter.\n *\n * This is intended to be used in the Pipeline. If the token does not pass the\n * filter then undefined will be returned.\n * Currently this StopwordFilter using dictionary to do O(1) time complexity stop word filtering.\n *\n * @module\n * @param {String} token The token to pass through the filter\n * @return {String}\n * @see elasticlunr.Pipeline\n */\nexport default function (elasticlunr) {\n  elasticlunr.generateStopWordFilter = function (stopWords) {\n    var words = stopWords.reduce(function (memo, stopWord) {\n      memo[stopWord] = stopWord;\n      return memo;\n    }, {});\n\n    return function (token) {\n      if (token && words[token.toString()] !== token.toString()) return token;\n      return null;\n    };\n  };\n  elasticlunr.stopWordFilter = function (token) {\n    if (token && elasticlunr.stopWordFilter.stopWords[token] !== true) {\n      return token;\n    }\n    return null;\n  };\n\n  /**\n   * Remove predefined stop words\n   * if user want to use customized stop words, user could use this function to delete\n   * all predefined stopwords.\n   *\n   * @return {null}\n   */\n  elasticlunr.clearStopWords = function () {\n    elasticlunr.stopWordFilter.stopWords = {};\n  };\n\n  /**\n   * Add customized stop words\n   * user could use this function to add customized stop words\n   *\n   * @params {Array} words customized stop words\n   * @return {null}\n   */\n  elasticlunr.addStopWords = function (words) {\n    if (words == null || Array.isArray(words) === false) return;\n\n    words.forEach(function (word) {\n      elasticlunr.stopWordFilter.stopWords[word] = true;\n    }, this);\n  };\n\n  /**\n   * Reset to default stop words\n   * user could use this function to restore default stop words\n   *\n   * @return {null}\n   */\n  elasticlunr.resetStopWords = function () {\n    elasticlunr.stopWordFilter.stopWords = elasticlunr.defaultStopWords;\n  };\n\n  elasticlunr.defaultStopWords = {\n    '': true,\n    'a': true,\n    'able': true,\n    'about': true,\n    'across': true,\n    'after': true,\n    'all': true,\n    'almost': true,\n    'also': true,\n    'am': true,\n    'among': true,\n    'an': true,\n    'and': true,\n    'any': true,\n    'are': true,\n    'as': true,\n    'at': true,\n    'be': true,\n    'because': true,\n    'been': true,\n    'but': true,\n    'by': true,\n    'can': true,\n    'cannot': true,\n    'could': true,\n    'dear': true,\n    'did': true,\n    'do': true,\n    'does': true,\n    'either': true,\n    'else': true,\n    'ever': true,\n    'every': true,\n    'for': true,\n    'from': true,\n    'get': true,\n    'got': true,\n    'had': true,\n    'has': true,\n    'have': true,\n    'he': true,\n    'her': true,\n    'hers': true,\n    'him': true,\n    'his': true,\n    'how': true,\n    'however': true,\n    'i': true,\n    'if': true,\n    'in': true,\n    'into': true,\n    'is': true,\n    'it': true,\n    'its': true,\n    'just': true,\n    'least': true,\n    'let': true,\n    'like': true,\n    'likely': true,\n    'may': true,\n    'me': true,\n    'might': true,\n    'most': true,\n    'must': true,\n    'my': true,\n    'neither': true,\n    'no': true,\n    'nor': true,\n    'not': true,\n    'of': true,\n    'off': true,\n    'often': true,\n    'on': true,\n    'only': true,\n    'or': true,\n    'other': true,\n    'our': true,\n    'own': true,\n    'rather': true,\n    'said': true,\n    'say': true,\n    'says': true,\n    'she': true,\n    'should': true,\n    'since': true,\n    'so': true,\n    'some': true,\n    'than': true,\n    'that': true,\n    'the': true,\n    'their': true,\n    'them': true,\n    'then': true,\n    'there': true,\n    'these': true,\n    'they': true,\n    'this': true,\n    'tis': true,\n    'to': true,\n    'too': true,\n    'twas': true,\n    'us': true,\n    'wants': true,\n    'was': true,\n    'we': true,\n    'were': true,\n    'what': true,\n    'when': true,\n    'where': true,\n    'which': true,\n    'while': true,\n    'who': true,\n    'whom': true,\n    'why': true,\n    'will': true,\n    'with': true,\n    'would': true,\n    'yet': true,\n    'you': true,\n    'your': true\n  };\n\n  elasticlunr.stopWordFilter.stopWords = elasticlunr.defaultStopWords;\n\n  return elasticlunr.Pipeline.registerFunction(elasticlunr.stopWordFilter, 'stopWordFilter');\n};\n","/* !\n * elasticlunr.trimmer\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\n/**\n * elasticlunr.trimmer is a pipeline function for trimming non word\n * characters from the begining and end of tokens before they\n * enter the index.\n *\n * This implementation may not work correctly for non latin\n * characters and should either be removed or adapted for use\n * with languages with non-latin characters.\n *\n * @module\n * @param {String} token The token to pass through the filter\n * @return {String}\n * @see elasticlunr.Pipeline\n */\nexport default function (elasticlunr) {\n  elasticlunr.trimmer = function (_token) {\n    var token = _token.toString();\n\n    if (token === null || token === undefined) {\n      throw new Error('token should not be undefined');\n    }\n\n    return _token.update((word) => word\n      .replace(/^\\W+/, '')\n      .replace(/\\W+$/, ''));\n  };\n\n  elasticlunr.Pipeline.registerFunction(elasticlunr.trimmer, 'trimmer');\n};\n","/* !\n * elasticlunr.js\n * Copyright (C) @YEAR Oliver Nightingale\n * Copyright (C) @YEAR Wei Song\n */\n\n/**\n * Convenience function for instantiating a new elasticlunr index and configuring it\n * with the default pipeline functions and the passed config function.\n *\n * When using this convenience function a new index will be created with the\n * following functions already in the pipeline:\n *\n * 1. elasticlunr.trimmer - trim non-word character\n * 2. elasticlunr.StopWordFilter - filters out any stop words before they enter the\n * index\n * 3. elasticlunr.stemmer - stems the tokens before entering the index.\n *\n *\n * Example:\n *\n *     var idx = elasticlunr(function () {\n *       this.addField('id');\n *       this.addField('title');\n *       this.addField('body');\n *\n *       //this.setRef('id'); // default ref is 'id'\n *\n *       this.pipeline.add(function () {\n *         // some custom pipeline function\n *       });\n *     });\n *\n *    idx.addDoc({\n *      id: 1,\n *      title: 'Oracle released database 12g',\n *      body: 'Yesterday, Oracle has released their latest database, named 12g, more robust.'\n *    });\n *\n *    idx.addDoc({\n *      id: 2,\n *      title: 'Oracle released annual profit report',\n *      body: 'Yesterday, Oracle has released their annual profit report of 2015, total profit is 12.5 Billion.'\n *    });\n *\n *    # simple search\n *    idx.search('oracle database');\n *\n *    # search with query-time boosting\n *    idx.search('oracle database', {fields: {title: {boost: 2}, body: {boost: 1}}});\n *\n * @param {Function} config A function that will be called with the new instance\n * of the elasticlunr.Index as both its context and first parameter. It can be used to\n * customize the instance of new elasticlunr.Index.\n * @namespace\n * @module\n * @return {elasticlunr.Index}\n *\n */\n\nvar elasticlunr = function (config) {\n  var idx = elasticlunr.Index();\n\n  idx.pipeline.add(\n    elasticlunr.trimmer,\n    elasticlunr.stopWordFilter,\n    elasticlunr.stemmer\n  );\n\n  if (config) config.call(idx, idx);\n\n  return idx;\n};\n\nimport utils from './utils.js';\nimport index from './index.js';\n// import invertedIndex from './inverted_index.js';\nimport configuration from './configuration.js';\nimport eventEmitter from './event_emitter.js';\nimport pipeline from './pipeline.js';\nimport documentStore from './document_store.js';\nimport sortedSet from './sorted_set.js';\nimport tokenizer from './tokenizer.js';\nimport stemmer from './stemmer.js';\nimport stopWordFilter from './stop_word_filter.js';\nimport trimmer from './trimmer.js';\n\n[\n  utils,\n  index,\n  //  invertedIndex,\n  configuration,\n  eventEmitter,\n  pipeline,\n  documentStore,\n  sortedSet,\n  tokenizer,\n  stemmer,\n  stopWordFilter,\n  trimmer\n].forEach(function (mod) {\n  mod(elasticlunr);\n});\n\n// elasticlunr.version = __VERSION__;\n\n// only used this to make elasticlunr.js compatible with lunr-languages\n// this is a trick to define a global alias of elasticlunr\n\nexport default elasticlunr;\n"],"names":["elasticlunr","utils","warn","global","message","console","toString","obj","Index","Error","documents","matcherFn","getDocumentStore","all","fieldName","field","str","query","levenshteinDistance","a","b","distanceMatrix","Array","length","fill","map","i","j","indicator","Math","min","union","array1","array2","o","indexOf","push","Token","token","metadata","fn","out","isArray","start","end","Field","term","_tf","_idf","Object","keys","_terms","tf","terms","idf","norm","_flnorm","entries","docId","options","ct","pow","positions","total","_ids","recalculateIDF","id","highlightPositions","_documents","sortedPositions","sort","reduce","current","pos","startTag","endTag","components","substring","join","matchingDocs","fuzz","fuzziness","msm","minimum_should_match","forEach","RegExp","filter","idxTerm","test","matchedTerm","ids","docs","ref","content","_store","data","pipeline","setPipeline","queryPipeline","setQueryPipeline","storePositions","storeDocuments","store","toRemove","doc","remove","add","sqrt","log10","updated","tokens","run","position","getPosition","inIdPos","splice","isQuery","DocumentStore","idx","inner","getFields","getField","prev","d","_fields","fields","_ref","emitter","documentStore","preComputed","highlight","idxData","fieldMap","name","addField","settings","index","occurences","record","reconstructed","docID","p","info","setToken","saveDocs","save","newRef","recurseTerm","rootTerm","branches","records","root","fieldRef","idxJson","toJSON","fieldID","allTokens","version","muteEvent","updatedIds","key","update","emit","updateLength","docIDs","values","fieldOptions","reindex","removeField","setRef","analyze","IdxInterface","Repository","queries","element","queryOptions","parser","QueryRepository","Query","results","score","NotQuery","innerQuery","queryAll","queryScore","matchedIDS","register","repo","parse","BoolQuery","should","must","must_not","filters","q","rewrite","r","isRewritten","filter_results","currentDocSet","filtered","filterQuery","matched","fq","t","opts","k","must_k","must_not_k","TermsQuery","expand","boost","pickedScore","undefined","MatchAllQuery","docIds","MatchQuery","minMatch","minimum_must_match","operator","repository","toLowerCase","Converter","intf","eslunr","defaultPipeline","getRef","toSave","addListener","apply","arguments","Pipeline","fnName","getRegisteredFunction","proxy","Proxy","get","target","propKey","receiver","propValue","call","tokenizer","_load","load","_legacyLoad","removeListener","mute","addDoc","elasticsearch","match","search","bool","idField","plugin","args","prototype","slice","unshift","IndexAssembly","knownVersions","componentType","item","generator","isDefault","component","newIndexShim","objE","Convert","EventEmitter","newIndex","idxLoader","createDefault","loadIndex","registerComponent","registry","Configuration","config","userConfig","buildDefaultConfig","JSON","buildUserConfig","error","reset","globalBool","globalExpand","fieldConfig","fieldExpand","addAllFields2UserConfig","events","pop","names","TypeError","hasHandler","fnIndex","_queue","registeredFunctions","registerFunction","label","warnIfFunctionNotRegistered","isRegistered","serialised","fns","after","existingFn","newFn","before","queueEntry","state","output","e","clone","copy","attr","constructor","hasOwnProperty","setDocStored","docInfo","serialisedData","_save","resetStore","canSave","isDocStored","docRef","hasDoc","getDoc","removeDoc","addFieldLength","updateFieldLength","getFieldLength","lunr","SortedSet","elements","set","locationFor","toArray","ctx","elem","sectionLength","pivot","floor","pivotElem","intersect","otherSet","intersectSet","aLen","bLen","longSet","shortSet","unionSet","shortSetElements","_split","lastIndex","seperator","exec","trim","defaultSeperator","setSeperator","sep","resetSeperator","getSeperator","stemmer","step2list","step3list","c","v","C","V","mgr0","meq1","mgr1","s_v","re_mgr0","re_mgr1","re_meq1","re_s_v","re_1a","re2_1a","re_1b","re2_1b","re_1b_2","re2_1b_2","re3_1b_2","re4_1b_2","re_1c","re_2","re_3","re_4","re2_4","re_5","re_5_1","re3_5","porterStemmer","w","stem","suffix","firstch","re","re2","re3","re4","fp","substr","toUpperCase","replace","generateStopWordFilter","stopWords","words","memo","stopWord","stopWordFilter","clearStopWords","addStopWords","word","resetStopWords","defaultStopWords","trimmer","_token","configuration","eventEmitter","sortedSet","mod"],"mappings":"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"}